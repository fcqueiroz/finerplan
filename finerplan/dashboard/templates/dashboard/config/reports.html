{% extends "dashboard.html" %}

{% block extra_scripts %}
<script src="{{ url_for('static', filename='js/report-form.js') }}" defer></script>
{% endblock %}

{% block dashboard %}
<div class="row">
  <!-- Add Card Report Form -->
  <div class="col-12 col-md-6 col-xl-4 py-3">
    <div class="card">
      <div class="card-body">
        <h2>Add Report</h2>
        <form action="#" method="post" name="report">
          {{ form.hidden_tag() }}

          <!-- Card Report Title -->
          <div class="form-row form-group">
            {{ form.name.label(class_="col-form-label") }}
            {{ form.name(class_="form-control") }}
            {% for error in form.name.errors %}
              <span>[{{ error }}]</span>
            {% endfor %}
          </div>

          <!-- Card Report Type -->
          <div id='CardType' class="form-row form-group">
            {{ form.group.label(class_="col-form-label") }}
            {{ form.group() }}
            {% for error in form.group.errors %}
              <span>[{{ error }}]</span>
            {% endfor %}
          </div>

          <!-- Information Reports -->
          <div id='InformationReports' class="form-row form-group d-none">
            {{ form.information_names.label(class_="col-form-label") }}
            {{ form.information_names(class_="custom-select") }}
            {% for error in form.information_names.errors %}
              <span>[{{ error }}]</span>
            {% endfor %}
          </div>

          <!-- Table Reports -->
          <div id='TableReports' class="form-row form-group d-none">
            {{ form.table_names.label(class_="col-form-label") }}
            {{ form.table_names(class_="custom-select") }}
            {% for error in form.table_names.errors %}
              <span>[{{ error }}]</span>
            {% endfor %}
          </div>

          <!-- Graph Reports -->
          <div id='GraphReports' class="form-row form-group d-none">
            {{ form.graph_names.label(class_="col-form-label") }}
            {{ form.graph_names(class_="custom-select") }}
            {% for error in form.graph_names.errors %}
              <span>[{{ error }}]</span>
            {% endfor %}
          </div>

          {{ form.submit(class_="btn btn-primary mt-4 pr-4 pl-4") }}
        </form>
      </div>
    </div>
  </div>

  <!-- Report List -->
  <div class="col-12 col-md-8 py-3">
    <div class="card">
      <div class="card-body">
        <h2 class="header-title">Report Cards</h2>
        {% if cards %}
        <table class="table text-center">
          <thead class="text-uppercase bg-primary">
              <tr class="text-white">
                  <th scope="col">Card Title</th>
                  <th scope="col">Reports</th>
              </tr>
          </thead>
          <tbody>
          {% for row in cards %}
            <tr>
              <td>{{ row.name }}</td>
              <td>
                [{% for report in row.reports %}
                {% if loop.index > 1 %}, {% endif %}{{ report.name }}
                {% endfor %}]
              </td>
            </tr>
          {% endfor %}
          </tbody>
        </table>
        {% else %}
        <p>No reports cards created yet.</p>
        {% endif %}
      </div>
    </div>
  </div>

</div>
{% endblock %}